{"config":{"lang":["en"],"separator":"[\\s\\-\\.]","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":""},{"location":"#introduction","title":"Introduction","text":"<p>Open Banking Connector is a fully open-source, free-to-use UK Open Banking client (connection layer) that simplifies connections to UK Open Banking APIs.</p> <p>It is self-deployed (runs as a component in your backend infrastructure) and released via a Docker image built entirely from the public source code. Because it runs locally, it has great performance (including low latency) as well as privacy/security benefits because PII data is not passed through another organisation. And fully-transparent source code allows you to see what the code is doing and even build it yourself using the included Dockerfile.</p> <p>It provides an HTTP API based on the UK Open Banking API but with two major simplifications:</p> <ol> <li>bank profiles allow Open Banking Connector to support differing bank implementations and behaviours including non-uniform spec versions and quirks/unexpected behaviours. This means you see a single, multi-bank API with these issues taken care of saving the considerable effort required for individual bank integrations.</li> <li>security profile (auth) concerns including access token acquisition and management are taken care of transparently (invisibly) isolating these from the rest of your backend and saving you the effort of implementing these.</li> </ol> <p>It is designed for use in the cloud and has been tested in production with AWS Elastic Kubernetes Service (EKS).</p>"},{"location":"#uses","title":"Uses","text":"<p>Open Banking Connector can be used:</p> <ul> <li>as a connectivity layer enabling your Open Banking application to connect to UK bank APIs</li> <li>as a tool for creating and managing bank registrations (OAuth2 clients) for use by other software (perhaps your own).</li> </ul> <p>The Open Banking Connector repo also contains a .NET project for bank tests. This is used in development of Open Banking Connector as a regression test suite. Please contact us if you are interested in using this.</p>"},{"location":"#requirements","title":"Requirements","text":"<p>To access UK Open Banking APIs, you will need to have an appropriate authorisation/registration with the FCA which gives you access to the UK Open Banking directory. To use bank sandboxes, you simply need to register with OBIE to use the UK Open Banking directory sandbox.</p> <p>To host Open Banking Connector in your backend infrastructure, you will need:</p> <ul> <li>a host (e.g. VM or Kubernetes cluster) to run the Open Banking Connector Docker image</li> <li>a relational database. Currently PosgreSQL is supported but, as Open Banking Connector uses EF Core (Microsoft's .NET ORM), other database integrations should be relatively easy to add (for example, SQLite is supported for development).</li> <li>a means of supplying configuration/secrets to Open Banking Connector container. Environment variables can be used and, in the case of secrets, could be e.g. dynamically supplied from a key secret vault. Parameters from AWS SSM Parameter Store are supported and we are open to adding other cloud configuration sources as required. ASP.NET Core user secrets are supported for development. </li> </ul>"},{"location":"#philosophy-and-business-model","title":"Philosophy and business model","text":"<p>Open Banking Connector was conceived following difficulties encountered when integrating with different bank APIs. It seemed pointless that everyone should have the burden of individually integrating with each bank - why couldn't we all contribute to a community effort instead?</p> <p>In particular, bank profiles (which capture bank-specific behaviours) were created so that new ones could be added and existing ones updated by the community, perhaps even by the banks themselves.</p> <p>The product is fully free-to-use but we ask customers to fund new features and bank integrations either by direct code contributions (please contact us) or by contracting us (Finnovation Labs) to do the work.</p> <p>Finnovation Labs also offers paid support, training and consultancy services.</p>"},{"location":"#documentation","title":"Documentation","text":"<p>This documentation is published on the docs website based on Markdown source code in the docs directory of the GitHub repo.</p> <p>Please raise a GitHub issue if you experience any problems or have any feedback.</p>"},{"location":"bank-integrations/","title":"Bank Integrations","text":"<p>The table below shows the banks which have been integrated with Open Banking Connector.</p> <p>UK Open Banking uses the Financial-grade API security profile. In this profile, APIs are provided by an OIDC Issuer. In general, a bank will provision an OIDC Issuer per banking brand but sometimes also per mobile app to allow for different auth URLs (which can then redirect to different mobile apps).</p> <p>In Open Banking Connector banks are identified by bank profiles. These are also given below.</p> Bank Group Brand/App (OIDC Issuer) Sandbox? Bank Profile APIs Barclays PersonalWealthBarclaycardBusinessCorporateBarclaycard\u00a0Commercial\u00a0Payments Barclays_PersonalBarclays_WealthBarclays_BarclaycardBarclays_BusinessBarclays_CorporateBarclays_BarclaycardCommercialPayments AISP HSBC FirstDirectUK PersonalUK BusinessUK Kinetic Hsbc_FirstDirectHsbc_UkPersonalHsbc_UkBusinessHsbc_UkKinetic AISP Lloyds SandboxLloyds PersonalLloyds BusinessLloyds CommercialHalifax PersonalBank\u00a0of\u00a0Scotland\u00a0PersonalBank\u00a0of\u00a0Scotland\u00a0BusinessBank\u00a0of\u00a0Scotland\u00a0CommercialMBNA Personal Lloyds_SandboxLloyds_LloydsPersonalLloyds_LloydsBusinessLloyds_LloydsCommericalLloyds_HalifaxPersonalLloyds_BankOfScotlandPersonalLloyds_BankOfScotlandBusinessLloyds_BankOfScotlandCommericalLloyds_MbnaPersonal AISP NatWest NatWest SandboxRBS SandboxNatWestNatWest BanklineNatWest ClearSpendRBSRBS BanklineRBS ClearSpendThe OneNatWest OneVirgin OneUlster Bank NIUlster Bank NI BanklineUlster\u00a0Bank\u00a0NI\u00a0ClearSpend NatWest_NatWestSandboxNatWest_RoyalBankOfScotlandSandboxNatWest_NatWestNatWest_NatWestBanklineNatWest_NatWestClearSpendNatWest_RoyalBankOfScotlandNatWest_RoyalBankOfScotlandBanklineNatWest_RoyalBankOfScotlandClearSpendNatWest_TheOneNatWest_NatWestOneNatWest_VirginOneNatWest_UlsterBankNiNatWest_UlsterBankNiBanklineNatWest_UlsterBankNiClearSpend AISP OBIE Modelo Obie_Modelo AISP, PISP"},{"location":"apis/","title":"APIs","text":""},{"location":"apis/#overview","title":"Overview","text":"<p>Open Banking Connector provides a set of HTTP APIs. Mostly these act as outer APIs providing replacement endpoints for endpoints provided by UK Open Banking APIs. These replacement endpoints wrap calls to UK Open Banking API endpoints as well as extra calls for token acquisition etc. Aside from the Bank Configuration and Auth Context APIs, Open Banking Connector APIs aim to mirror their UK Open Banking equivalents as much as possible.</p> <p>The APIs provided are as follows:</p> API Description Bank Configuration This API provides endpoints for bank setup including replacement endpoints for endpoints provided in the UK Open Banking Dynamic Client Registration API Account and Transaction This API aims to mirror the UK Open Banking Account and Transaction API. Payment Initiation This API aims to mirror the UK Open Banking Payment Initiation API. Variable Recurring Payments This API aims to mirror the UK Open Banking Variable Recurring Payments API. Auth Contexts API This API provides endpoints for handling bank OAuth2 redirects that occur following end-user auth"},{"location":"apis/#security","title":"Security","text":"<p>The Open Banking Connector API is intended to be used as an internal (i.e. non-internet-accessible) API within your backend infrastructure. Please see below for info about handling bank redirects.</p> <p>It is provided as an HTTP rather than HTTPS API as customers are expected to configure HTTPS via an outer wrapper (e.g. using Kubernetes or a reverse proxy) to enable easier certificate configuration and to set up features such as MTLS.</p> <p>As an internal API, no tokens are required to access the API. It should obviously be secured as appropriate, e.g. via MTLS, firewalls, AWS security groups etc.</p> <p>Internally, Open Banking Connector acquires and uses tokens to access UK Open Banking APIs. As a security feature, these tokens are not retrievable via the HTTP API. So, for example, when reading (GETing) a consent such as an Account Access Consent tokens will not be included in the consent payload. To inspect them, you will need to query the database directly.</p> <p>Open Banking Connector stores sensitive data including tokens in the database. So the database provided to Open Banking Connector should therefore be tightly secured including using at-rest encryption and not allowing access from any other application. Controls on human access to the database should also be implemented.</p>"},{"location":"apis/#bank-redirects","title":"Bank Redirects","text":"<p>It is expected that the customer implements their own secure internet-facing endpoint to handle bank redirects that occur following end-user auth.</p> <p>This endpoint can then forward data to Open Banking Connector via the POST /auth/redirect-delegate endpoint. Please contact us if you need any help with creating an internet-facing redirect endpoint.</p>"},{"location":"apis/account-and-transaction/","title":"Account and Transaction API","text":"<p>The Account and Transaction API provides access to UK Open Banking Account and Transaction API functionality.</p>"},{"location":"apis/account-and-transaction/#openapi-spec","title":"OpenAPI Spec","text":"<p>An OpenAPI spec for the Account and Transaction API showing the endpoints and data types is provided here. This is a static capture of the API at a given release (see grey box at top right of OpenAPI spec for which release).</p> <p>For any running version of Open Banking Connector, the OpenAPI spec for the currently-running software is provided at <code>GET /swagger/index.html</code>.</p>"},{"location":"apis/account-and-transaction/#relationship-to-uk-open-banking-account-and-transaction-api","title":"Relationship to UK Open Banking Account and Transaction API","text":"<p>The UK Open Banking Account and Transaction (AISP) API is defined here.</p> <p>Open Banking Connector provides replacement endpoints for the UK OB AISP endpoints as shown in the following table. The replacement endpoints, where relevant, use data types from UK OB AISP API version v3.1.10. When calling external (bank) APIs, Open Banking Connector performs request/response payload translation for any banks supporting earlier API versions.</p> UK OB AISP endpoint Replacement Open Banking Connector endpoint POST /account-access-consents POST /aisp/account-access-consents GET /account-access-consents/{ConsentId} GET /aisp/account-access-consents/{accountAccessConsentId} DELETE /account-access-consents/{ConsentId} DELETE /aisp/account-access-consents/{accountAccessConsentId} GET /accounts GET /aisp/accounts GET /accounts/{AccountId} GET /aisp/accounts/{externalApiAccountId} GET /balances GET /aisp/balances GET /accounts/{AccountId}/balances GET /aisp/accounts/{externalApiAccountId}/balances GET /direct-debits GET /aisp/direct-debits GET /accounts/{AccountId}/direct-debits GET /aisp/accounts/{externalApiAccountId}/direct-debits GET /party GET /aisp/party GET /accounts/{AccountId}/party GET /aisp/accounts/{externalApiAccountId}/party GET /accounts/{AccountId}/parties GET /aisp/accounts/{externalApiAccountId}/parties GET /standing-orders GET /aisp/standing-orders GET /accounts/{AccountId}/standing-orders GET /aisp/accounts/{externalApiAccountId}/standing-orders GET /transactions GET /aisp/transactions GET /accounts/{AccountId}/transactions GET /aisp/accounts/{externalApiAccountId}/transactions GET /accounts/{AccountId}/statements/{StatementId}/transactions GET /aisp/accounts/{externalApiAccountId}/statements/{externalApiStatementId}/transactions <p>All replacement Open Banking Connector endpoints handle behaviour and spec variations between banks meaning the same API calls can be used regardless of bank. Bank-specific differences are determined by a bank's bank profile.</p> <p>In the UK OB AISP API, resource endpoints such as <code>GET /accounts</code> require a consent-specific bearer token supplied in the <code>Authorization</code> header. Corresponding Open Banking Connector endpoints instead require the <code>x-obc-account-access-consent-id</code> header to be populated with the relevant account access consent ID (<code>Id</code> returned from POST /aisp/account-access-consents).</p> <p>The Open Banking Connector API provides two additional endpoints that are not UK OB replacements: POST /aisp/account-access-consent-auth-contexts and GET /aisp/account-access-consent-auth-contexts/{accountAccessConsentAuthContextId}. These respectively create and read an auth context which is a time-limited session for end-user authentication. Calling POST /aisp/account-access-consent-auth-contexts creates an auth context and returns a URL which can be used for end-user auth.</p>"},{"location":"apis/account-and-transaction/#mappings-to-database-objects","title":"Mappings to database objects","text":"<p>The following endpoints create/read/delete records in the account_access_consent database table:</p> <ul> <li>POST /aisp/account-access-consents</li> <li>GET/aisp/account-access-consents/{accountAccessConsentId}</li> <li>DELETE /aisp/account-access-consents/{accountAccessConsentId}</li> </ul> <p>The following endpoints create/read records of kind <code>AccountAccessConsentAuthContext</code> in the auth_context table (these records are deleted automatically following successful auth):</p> <ul> <li>POST /aisp/account-access-consent-auth-contexts</li> <li>GET /aisp/account-access-consent-auth-contexts/{accountAccessConsentAuthContextId}</li> </ul>"},{"location":"apis/account-and-transaction/#external-bank-api-operations","title":"External (bank) API operations","text":"<p>All replacement Open Banking Connector endpoints included in the table above perform a call to the relevant external (bank) API endpoint listed. Additionally, calls are made to the external API token endpoint as required.</p> <p>In the case of DELETE /aisp/account-access-consents/{accountAccessConsentId}, the header <code>x-obc-include-external-api-operation</code> can be used to avoid deleting an account access consent at the external API (the default behaviour). When <code>x-obc-include-external-api-operation</code> is <code>false</code>, only the local database object will be deleted. </p>"},{"location":"apis/account-and-transaction/openapi/","title":"OpenAPI spec","text":""},{"location":"apis/auth-contexts/","title":"Auth Contexts API","text":"<p>The Auth Contexts API provides endpoints for managing auth contexts.</p>"},{"location":"apis/auth-contexts/#openapi-spec","title":"OpenAPI Spec","text":"<p>An OpenAPI spec for the Auth Contexts API showing the endpoints and data types is provided here. This is a static capture of the API at a given release (see grey box at top right of OpenAPI spec for which release).</p> <p>For any running version of Open Banking Connector, the OpenAPI spec for the currently-running software is provided at <code>GET /swagger/index.html</code>.</p>"},{"location":"apis/auth-contexts/openapi/","title":"OpenAPI spec","text":""},{"location":"apis/bank-configuration/","title":"Bank Configuration API","text":"<p>The Bank Configuration API allows you to create, read, and delete configuration (setup) objects for a bank in Open Banking Connector.</p> <p>To set up a bank, see instructions here. </p>"},{"location":"apis/bank-configuration/#openapi-spec","title":"OpenAPI Spec","text":"<p>An OpenAPI spec for the Bank Configuration API showing the endpoints and data types is provided here. This is a static capture of the API at a given release (see grey box at top right of OpenAPI spec for which release).</p> <p>For any running version of Open Banking Connector, the OpenAPI spec for the currently-running software is provided at <code>GET /swagger/index.html</code>.</p>"},{"location":"apis/bank-configuration/#relationship-to-uk-open-banking-dynamic-client-registration-api","title":"Relationship to UK Open Banking Dynamic Client Registration API","text":"<p>The UK Open Banking Dynamic Client Registration (DCR) API is defined here.</p> <p>Open Banking Connector provides replacement endpoints for the UK OB DCR endpoints as shown below. The replacement endpoints, where relevant, use data types from the latest UK OB DCR v3.3 API. When calling external (bank) APIs, Open Banking Connector performs request/response payload translation for any banks supporting earlier API versions.</p> UK OB DCR endpoint Replacement Open Banking Connector endpoint POST /register POST /config/bank-registrations GET /register/{ClientId} GET /config/bank-registrations/{bankRegistrationId} DELETE /register/{ClientId} DELETE /config/bank-registrations/{bankRegistrationId} <p>All the replacement Open Banking Connector endpoints handle behaviour and spec variations between banks meaning the same API calls can be used regardless of bank. Bank-specific differences are determined by a bank's bank profile.</p> <p>There are some further major differences when creating a bank registration/OAuth2 client using POST /config/bank-registrations.</p> <p>Firstly, Open Banking Connector can infer most of the payload to send to the bank during DCR from only a few request properties. This means the creation of a new BankRegistration (OAuth2 client) is usually as simple as: <pre><code>POST /config/bank-registrations HTTP/1.1\n# standard headers omitted\n{\n  \"BankProfile\": \"Obie_Modelo\",\n  \"SoftwareStatementProfileId\": \"All\"\n}\n</code></pre> where only the bank's bank profile and ID of the software statement profile are required. Other optional properties are available but generally not necessary to use. </p> <p>Secondly, Open Banking Connector knows when to \"re-use\" an existing external (bank) API OAuth2 client rather than create a new one meaning the user can happily call <code>POST /config/bank-registrations</code> for each bank they want to use without any further knowledge 1. This client re-use is completely transparent to the user. It can be overridden using the <code>ForceDynamicClientRegistration</code> property.</p> <p>Finally, Open Banking Connector allows an existing OAuth2 client created externally to be passed in using the <code>ExternalApiObject</code> property. This is useful when DCR is not supported by the bank or an OAuth2 client has been created elsewhere. When <code>ExternalApiObject</code> is non-null, DCR is not performed.</p>"},{"location":"apis/bank-configuration/#mappings-to-database-objects","title":"Mappings to database objects","text":"<p>A successful call to <code>POST /config/bank-registrations</code> always creates a record in the database <code>bank_registration</code> table even when DCR is not performed (i.e. an existing client has been supplied or re-used).</p> <p>Likewise, GET /config/bank-registrations/{bankRegistrationId} and DELETE /config/bank-registrations/{bankRegistrationId} can be used to read and delete database <code>bank_registration</code> records. </p>"},{"location":"apis/bank-configuration/#external-bank-api-operations","title":"External (bank) API operations","text":"<p>When <code>POST /config/bank-registrations</code> causes DCR to be performed, a call will be made to the external (bank) API <code>POST /register</code> endpoint and the property <code>ExternalApiResponse</code> will be included in the response. Otherwise just the local database object will be returned.</p> <p>Where supported and specified by the bank profile (or forced via header <code>x-obc-include-external-api-operation</code>), GET /config/bank-registrations/{bankRegistrationId} will perform a call to the external (bank) API <code>GET /register</code> endpoint and the property <code>ExternalApiResponse</code> will be included in the response. Otherwise just the local database object will be returned.</p> <p>Where supported and specified by the bank profile (or forced via header <code>x-obc-include-external-api-operation</code>), DELETE /config/bank-registrations/{bankRegistrationId} will perform a call to the external (bank) API <code>DELETE /register/{ClientId}</code> endpoint. Otherwise just the local database object will be deleted.</p> <p>Note that only a few banks support <code>GET /register/{ClientId}</code> and <code>DELETE /register/{ClientId}</code> and so in most cases GET /config/bank-registrations/{bankRegistrationId} and DELETE /config/bank-registrations/{bankRegistrationId} will not result in external (bank) API calls.</p> <ol> <li> <p>Why is this re-use necessary or desirable? Some bank groups (e.g. <code>NatWest</code>) expect/require the same OAuth2 client to re-used between sets of banks (e.g. <code>NatWest_RoyalBankOfScotland</code> and <code>NatWest_VirginOne</code>). Also performing DCR twice for the same bank might, depending on bank behaviour, result in re-generating the previous OAuth2 client (with same ID). For at least one bank, though, using the same client for both AISP and PISP is not allowed. Open Banking Connector has an internal concept of bank registration groups. These are essentially rules which determine when OAuth2 clients can be re-used (shared) by default. These are designed to ensure <code>POST /config/bank-registrations</code> can be called safely for all banks and only creates new OAuth2 clients where necessary.\u00a0\u21a9</p> </li> </ol>"},{"location":"apis/bank-configuration/openapi/","title":"OpenAPI spec","text":""},{"location":"apis/bank-configuration/set-up-a-bank/","title":"Set up a bank","text":"<p>To set up a bank, you will need to create a bank registration (OAuth2 client) which establishes a relationship with the bank.</p> <p>To do this, first determine the bank profile which is used to identify the bank in Open Banking Connector. Bank profiles are listed in the bank integrations table.</p> <p>Each bank registration requires a software statement profile (includes an SSA which identifies the third-party provider (TPP) to the bank) and so it is necessary for one of these to be set up before attempting to create a bank registration.</p> <p>To create the registration, call POST /config/bank-registrations. This will either create a new OAuth2 client at the bank or re-use an existing one as appropriate. The following call can be used: <pre><code>POST /config/bank-registrations HTTP/1.1\n# standard headers omitted\n{\n  \"BankProfile\": \"MyBankProfileName\",\n  \"SoftwareStatementProfileId\": \"MySoftwareStatementProfileId\"\n}\n</code></pre></p> <p>Once a bank registration has been set up, you can then use functional APIs such as the Account and Transaction API to create an account access consent etc.</p>"},{"location":"apis/payment-initiation/","title":"Payment Initiation API","text":"<p>The Payment Initiation API provides access to UK Open Banking Payment Initiation API functionality.</p>"},{"location":"apis/payment-initiation/#openapi-spec","title":"OpenAPI Spec","text":"<p>An OpenAPI spec for the Payment Initiation API showing the endpoints and data types is provided here. This is a static capture of the API at a given release (see grey box at top right of OpenAPI spec for which release).</p> <p>For any running version of Open Banking Connector, the OpenAPI spec for the currently-running software is provided at <code>GET /swagger/index.html</code>.</p>"},{"location":"apis/payment-initiation/#relationship-to-uk-open-banking-payment-initiation-api","title":"Relationship to UK Open Banking Payment Initiation API","text":"<p>The UK Open Banking Payment Initiation (PISP) API is defined here.</p> <p>Open Banking Connector provides replacement endpoints for the UK OB PISP endpoints as shown in the following table. The replacement endpoints, where relevant, use data types from UK OB PISP API version v3.1.6. When calling external (bank) APIs, Open Banking Connector performs request/response payload translation for any banks supporting earlier API versions.</p> UK OB PISP endpoint Replacement Open Banking Connector endpoint POST /domestic-payment-consents POST /pisp/domestic-payment-consents GET /domestic-payment-consents/{ConsentId} GET /pisp/domestic-payment-consents/{domesticPaymentConsentId} POST /domestic-payments POST /pisp/domestic-payments GET /domestic-payments/{DomesticPaymentId} GET /pisp/domestic-payments/{externalApiId} <p>All replacement Open Banking Connector endpoints handle behaviour and spec variations between banks meaning the same API calls can be used regardless of bank. Bank-specific differences are determined by a bank's bank profile.</p> <p>In the UK OB PISP API, some resource endpoints such as <code>POST /domestic-payments</code> require a consent-specific bearer token supplied in the <code>Authorization</code> header. Corresponding Open Banking Connector endpoints instead require the <code>x-obc-domestic-payment-consent-id</code> header to be populated with the relevant domestic payment consent ID (<code>Id</code> returned from POST /pisp/domestic-payment-consents).</p> <p>The Open Banking Connector API provides two additional endpoints that are not UK OB replacements: POST /pisp/domestic-payment-consent-auth-contexts and GET /pisp/domestic-payment-consent-auth-contexts/{domesticPaymentConsentAuthContextId}. These respectively create and read an auth context which is a time-limited session for end-user authentication. Calling POST /pisp/domestic-payment-consent-auth-contexts creates an auth context and returns a URL which can be used for end-user auth.</p>"},{"location":"apis/payment-initiation/#mappings-to-database-objects","title":"Mappings to database objects","text":"<p>The following endpoints create/read records in the domestic_payment_consent database table:</p> <ul> <li>POST /pisp/domestic-payment-consents</li> <li>GET /pisp/domestic-payment-consents/{domesticPaymentConsentId}</li> </ul> <p>The following endpoints create/read records of kind <code>DomesticPaymentConsentAuthContext</code> in the auth_context table (these records are deleted automatically following successful auth):</p> <ul> <li>POST /pisp/domestic-payment-consent-auth-contexts</li> <li>GET /pisp/domestic-payment-consent-auth-contexts/{domesticPaymentConsentAuthContextId}</li> </ul>"},{"location":"apis/payment-initiation/#external-bank-api-operations","title":"External (bank) API operations","text":"<p>All replacement Open Banking Connector endpoints included in the table above perform a call to the relevant external (bank) API endpoint listed. Additionally, calls are made to the external API token endpoint as required.</p>"},{"location":"apis/payment-initiation/openapi/","title":"OpenAPI spec","text":""},{"location":"apis/variable-recurring-payments/","title":"Variable Recurring Payments API","text":"<p>The Variable Recurring Payments API provides access to UK Open Banking Variable Recurring Payments API functionality.</p>"},{"location":"apis/variable-recurring-payments/#openapi-spec","title":"OpenAPI Spec","text":"<p>An OpenAPI spec for the Variable Recurring Payments API showing the endpoints and data types is provided here. This is a static capture of the API at a given release (see grey box at top right of OpenAPI spec for which release).</p> <p>For any running version of Open Banking Connector, the OpenAPI spec for the currently-running software is provided at <code>GET /swagger/index.html</code>.</p>"},{"location":"apis/variable-recurring-payments/#relationship-to-uk-open-banking-variable-recurring-payments-api","title":"Relationship to UK Open Banking Variable Recurring Payments API","text":"<p>(Coming soon)</p>"},{"location":"apis/variable-recurring-payments/#mappings-to-database-objects","title":"Mappings to database objects","text":"<p>(Coming soon)</p>"},{"location":"apis/variable-recurring-payments/#external-bank-api-operations","title":"External (bank) API operations","text":"<p>(Coming soon)</p>"},{"location":"apis/variable-recurring-payments/openapi/","title":"OpenAPI spec","text":""},{"location":"configuration/","title":"Configuration &amp; secrets","text":"<p>Configuration and secrets are read-only settings that customise the behaviour of Open Banking Connector. This is in contrast to database access which is read-write.</p> <p>Secrets provide sensitive configuration but, from Open Banking Connector's perspective, configuration and secrets are unified in that any setting can be assigned a value by any configuration provider. (This does not mean the two should be stored together or supplied from the same source though - see secrets and security below).</p> <p>Here we give an overview of configuration in Open Banking Connector.</p>"},{"location":"configuration/#structure","title":"Structure","text":"<p>Configuration consists of settings which can be assigned values.</p> <p>These settings are organised by area into settings groups.</p> <p>Settings have a hierarchical naming structure where the first \"level\" is always OpenBankingConnector (essentially a namespace) and subsequent levels are separated by colons (:).</p> <p>Values are always representable as strings (although in JSON files, where applicable and optionally, they may be represented in natural form as numbers and booleans where applicable).</p> <p>Below is an example of a setting and value that configures the Open Banking Connector database provider to be <code>\"Sqlite\"</code>:</p> Setting Value OpenBankingConnector:Database:Provider <code>\"Sqlite\"</code>"},{"location":"configuration/#settings-groups","title":"Settings groups","text":"<p>Open Banking Connector configuration settings are collected into groups which are described on their own pages:</p> <ul> <li>database settings configure the database used by Open Banking Connector</li> <li>software statement profiles settings configure software statement profiles used by Open Banking Connector</li> <li>transport certificate profiles settings configure transport certificate profiles used by Open Banking Connector</li> <li>signing certificate profiles settings configure signing certificate profiles used by Open Banking Connector</li> <li>configuration sources settings configure configuration sources used by Open Banking Connector</li> </ul>"},{"location":"configuration/#sources","title":"Sources","text":"<p>Open Banking Connector is written in .NET and by default uses ASP.NET Core default application configuration sources to collect configuration from a number of configuration providers in priority order.</p> <p>These include the command-line and environment variable providers as highest-priority providers.</p> <p>Configuration sources can be customised and added using configuration sources settings.</p>"},{"location":"configuration/#secrets-and-security","title":"Secrets and security","text":"<p>Some settings values are very sensitive, for example keys, and should be carefully and securely stored and managed.</p> <p>It is recommended to provide sensitive configuration (secrets) and standard configuration from different sources and not to store them together.</p> <p>For example, standard configuration could be supplied via environment variables and secrets from a cloud secrets provider.</p> <p>Even if environment variables are the vehicle for providing both (to decouple configuration and application), the secrets environment variables could e.g. be dynamically produced during application/pod startup and not stored with standard configuration.</p>"},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"<p>When supplying configuration via environment variables, you should use double underscores (__) in place of colons (:) in settings names. So, for instance, the setting <code>OpenBankingConnector:Database:Provider</code> would be configured using environment variable <code>OpenBankingConnector__Database__Provider</code>. This is a .NET convention and explained here.</p>"},{"location":"configuration/configuration-sources-settings/","title":"Configuration sources settings","text":"<p>Configuration sources are an ASP.NET Core concept and are used in Open Banking Connector to provide configuration settings including secrets.</p> <p>Configuration sources settings are settings which adjust configuration sources used from the defaults given here. Any new configuration sources added will be added with lower priority than the default environment variable and command line sources.</p> <p>These settings should only be modified from a default configuration source, e.g. environemnt variables, so that they can be picked up. For example, specifying use of the AWS SSM parameter source via an AWS SSM parameter will not work.</p>"},{"location":"configuration/configuration-sources-settings/#settings","title":"Settings","text":"Name Valid Values Default Value(s) Description OpenBankingConnector:ConfigurationSources:UseUserSecrets {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"false\"</code> (development environment) <p> <code>\"true\"</code> (otherwise) User secrets are a ASP.NET Core configuration source intended for use in development (see here). This setting allows user secrets to be explicitly included or excluded as desired. OpenBankingConnector:ConfigurationSources:AwsSsmParameterPrefix string <code>\"\"</code> A non-empty value specifies that AWS SSM parameters with the specified prefix will be used as a configuration source in Open Banking Connector. The specified prefix functions as a namespace, so for example an AWS SSM parameter <code>/&lt;specifiedPrefix&gt;/OpenBankingConnector/Database/EnsureDatabaseCreated</code> will map to Open Banking Connector setting <code>OpenBankingConnector:Database:EnsureDatabaseCreated</code>. When this configuration source is used, please ensure Open Banking Connector is run in an envrionment with an AWS IAM role/user which contains a suitable permissions policy1. <ol> <li> <p>Exmple AWS permission policy: <pre><code>{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n{\n\"Sid\": \"SSMPermissionStatement\",\n\"Effect\": \"Allow\",\n\"Action\": \"ssm:GetParametersByPath\",\n\"Resource\": \"arn:aws:ssm:eu-west-2:&lt;awsAccountId&gt;:parameter/&lt;specifiedPrefix&gt;/*\"\n}\n]\n}\n</code></pre> \u21a9</p> </li> </ol>"},{"location":"configuration/database-settings/","title":"Database settings","text":"<p>Database settings are used to configure the database used by Open Banking Connector to read and write data.</p> <p>In non-development environments (the default), you will at least need to at least provide a connection string setting for the configured database provider.</p>"},{"location":"configuration/database-settings/#settings","title":"Settings","text":"Name Valid Values Default Value(s) Description OpenBankingConnector:Database:Provider {<code>\"Sqlite\"</code>, <code>\"PostgreSql\"</code>} <code>\"PostgreSql\"</code> Determines which database provider Open Banking Connector uses. OpenBankingConnector:Database:ConnectionStrings:{Provider} <p> where Provider \u2208 {Sqlite, PostgreSql} </p> string <code>\"Data Source=./sqliteTestDb.db\"</code> (development environment and Provider = <code>\"Sqlite\"</code>) <p> <code>\"Host=localhost;Database=test;</code><code>Username=postgres\"</code> (development environment and Provider = <code>\"PostgreSql\"</code>) <p> - (otherwise) Connection strings for each database provider. Open Banking Connector only reads the one for the provider specified by OpenBankingConnector:Database:Provider. The BankTests project, however, may use multiple connection strings to test with multiple databases. A list of connection string parameters for provider <code>PostgreSql</code> is given here. OpenBankingConnector:Database:EnsureDatabaseCreated {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"false\"</code> At application start-up, ensure database is created if does not exist. OpenBankingConnector:Database:EnsureDatabaseMigrated {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"true\"</code> At application start-up, apply pending migrations. Only supported for database providers with migration support (i.e. only PostgreSql at this time)."},{"location":"configuration/signing-certificate-profiles-settings/","title":"Signing certificate profiles settings","text":"<p>Signing certificate profiles settings are used to configure signing certificate profiles used by Open Banking Connector.</p> <p>A signing certificate profile is a group of settings comprising information related to a signing certificate. It is identified by a user-defined profile ID. It is referenced by one or more software statement profiles.</p> <p>Signing certificates and associated keys are used to sign and validate JWTs sent to banks.</p> <p>No signing certificate profiles are configured by default and you will require at least one in order to create a bank registration.</p>"},{"location":"configuration/signing-certificate-profiles-settings/#settings","title":"Settings","text":"Name Valid Values Default Value(s) Description OpenBankingConnector:SigningCertificateProfiles:{Id}:Active <p> where string Id is user-defined profile ID </p> {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"true\"</code> Whether profile is active or inactive (ignored by Open Banking Connector). This allows profiles to be \"switched on and off\" for testing etc. OpenBankingConnector:SigningCertificateProfiles:{Id}:SigningCertificateType <p> where string Id is user-defined profile ID </p> {<code>\"OBLegacy\"</code>, <code>\"OBSeal\"</code>} <code>\"OBSeal\"</code> Type of UK Open Banking Directory certificate used. OpenBankingConnector:SigningCertificateProfiles:{Id}:AssociatedKeyId <p> where string Id is user-defined profile ID </p> string - Signing Key ID (from UK Open Banking Directory) as string. This is not the same as the user-defined profile ID for this profile. OpenBankingConnector:SigningCertificateProfiles:{Id}:AssociatedKey <p> where string Id is user-defined profile ID </p> string - Signing key (PKCS #8) as \"stringified\" PEM file with escaped newline characters (\"<code>\\n</code>\") and PRIVATE KEY label.             Example: <code>\"-----BEGIN PRIVATE KEY-----\\nABC\\n-----END PRIVATE KEY-----\\n\"</code>."},{"location":"configuration/software-statement-profiles-settings/","title":"Software statement profiles settings","text":"<p>Software statement profiles settings are used to configure software statement profiles for use by Open Banking Connector.</p> <p>In UK Open Banking, a software statement identifies a third-party provider (TPP) that can create bank registrations (OAuth2 clients) with banks and can be seen as a kind of \"passport\". A TPP can create multiple software statements and this is fully supported by Open Banking Connector.</p> <p>You should create the software statements you need in the UK Open Banking Directory. From there, you can also generate a corresponding software statement assertion (SSA) for each. Each SSA can then be the basis of one or more software statement profiles in Open Banking Connector.</p> <p>A software statement profile is a group of settings comprising</p> <ol> <li>a software statement assertion (SSA)</li> <li> <p>associated information which will be used for bank registrations that reference the software statement profile:</p> <ul> <li>a transport certificate profile specifying a transport key/certificate</li> <li>a signing certificate profile which specifying a signing key/certificate</li> <li>a default redirect URL</li> </ul> </li> </ol> <p>Transport certificate profiles and signing certificate profiles can be re-used between software statement profiles, i.e. referenced by more than one software statement profile.</p> <p>When creating a bank registration (OAuth2 client), a software statement profile is specified which configures the associated SSA, transport key-pair, signing key, etc.</p> <p>No software statement profiles are configured by default and you will require at least one in order to create a bank registration. To create a software statement profile, simply decide upon an ID and configure minimally the settings lacking defaults below.</p> <p>As your needs evolve you can create multiple software statement profiles to allow use of multiple SSAs and certs in different combinations etc.</p> <p>Software statement profiles are validated on application start-up so please be alert to warning and error messages related to these.</p>"},{"location":"configuration/software-statement-profiles-settings/#settings","title":"Settings","text":"Name Valid Values Default Value(s) Description OpenBankingConnector:SoftwareStatementProfiles:{Id}:Active <p> where string Id is user-defined profile ID </p> {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"true\"</code> Whether profile is active or inactive (ignored by Open Banking Connector). This allows profiles to be \"switched on and off\" for testing etc. OpenBankingConnector:SoftwareStatementProfiles:{Id}:SoftwareStatement <p> where string Id is user-defined profile ID </p> string - Software statement assertion (SSA) as string, i.e. \"FirstPart.SecondPart.ThirdPart\". OpenBankingConnector:SoftwareStatementProfiles:{Id}:TransportCertificateProfileId <p> where string Id is user-defined profile ID </p> string - ID of transport certificate profile to use for mutual TLS with this software statement profile. OpenBankingConnector:SoftwareStatementProfiles:{Id}:SigningCertificateProfileId <p> where string Id is user-defined profile ID </p> string - ID of signing certificate profile to use for signing JWTs etc with this software statement profile. OpenBankingConnector:SoftwareStatementProfiles:{Id}:DefaultFragmentRedirectUrl <p> where string Id is user-defined profile ID </p> string - Default redirect URL for consent authorisations when OAuth2 <code>response_mode</code> = <code>fragment</code>."},{"location":"configuration/transport-certificate-profiles-settings/","title":"Transport certificate profiles settings","text":"<p>Transport certificate profiles settings are used to configure transport certificate profiles used by Open Banking Connector.</p> <p>A transport certificate profile is a group of settings comprising a transport certificate, associated key, and other related information. It is identified by a user-defined profile ID. It is referenced by one or more software statement profiles.</p> <p>Transport certificates are used for mutual TLS when communicating with banks.</p> <p>No transport certificate profiles are configured by default and you will require at least one in order to create a bank registration.</p>"},{"location":"configuration/transport-certificate-profiles-settings/#settings","title":"Settings","text":"Name Valid Values Default Value(s) Description OpenBankingConnector:TransportCertificateProfiles:{Id}:Active <p> where string Id is user-defined profile ID </p> {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"true\"</code> Whether profile is active or inactive (ignored by Open Banking Connector). This allows profiles to be \"switched on and off\" for testing etc. OpenBankingConnector:TransportCertificateProfiles:{Id}:TransportCertificateType <p> where string Id is user-defined profile ID </p> {<code>\"OB</code><code>Legacy\"</code>, <code>\"OBWac\"</code>} <code>\"OBWac\"</code> Type of UK Open Banking Directory certificate used. OpenBankingConnector:TransportCertificateProfiles:{Id}:DisableTlsCertificateVerification <p> where string Id is user-defined profile ID </p> {<code>\"true\"</code>, <code>\"false\"</code>} <code>\"false\"</code> Disable verification of external bank TLS certificates when using mutual TLS with this certificate profile. Not intended for production use but sometimes helpful for diagnosing issues with bank sandboxes (e.g. if they use self-signed certificates). OpenBankingConnector:TransportCertificateProfiles:{Id}:CertificateDnWithHexDottedDecimalAttributeValues <p> where string Id is user-defined profile ID </p> string - Transport certificate DN to use for bank registration (DCR) with hex values for dotted-decimal attributes (as specified here). Whether             CertificateDnWithHexDottedDecimalAttributeValues setting or             CertificateDnWithStringDottedDecimalAttributeValues setting is used in bank registration is             determined by bank registration request property             UseTransportCertificateDnWithStringNotHexDottedDecimalAttributeValues. This setting is ignored when TransportCertificateType = <code>\"OBLegacy\"</code>. OpenBankingConnector:TransportCertificateProfiles:{Id}:CertificateDnWithStringDottedDecimalAttributeValues <p> where string Id is user-defined profile ID </p> string - Alternative transport certificate DN to use for bank registration (DCR) with string (not hex) values for dotted-decimal attributes             (required by some banks). Whether CertificateDnWithHexDottedDecimalAttributeValues setting or       CertificateDnWithStringDottedDecimalAttributeValues setting is used in bank registration is             determined by bank registration request property          UseTransportCertificateDnWithStringNotHexDottedDecimalAttributeValues. This setting is ignored when TransportCertificateType = <code>\"OBLegacy\"</code>. OpenBankingConnector:TransportCertificateProfiles:{Id}:AssociatedKey <p> where string Id is user-defined profile ID </p> string - Transport key (PKCS #8) as \"stringified\" PEM file with escaped newline characters (<code>\"\\n\"</code>) and PRIVATE KEY label.             Example: <code>\"-----BEGIN PRIVATE KEY-----\\nABC\\n-----END PRIVATE KEY-----\\n\"</code>. OpenBankingConnector:TransportCertificateProfiles:{Id}:Certificate <p> where string Id is user-defined profile ID </p> string - Transport certificate (X.509) as \"stringified\" PEM file with escaped newline characters (<code>\"\\n\"</code>) and CERTIFICATE label.             Example: <code>\"-----BEGIN CERTIFICATE-----\\nABC\\n-----END CERTIFICATE-----\\n\"</code>."},{"location":"contributor-info/","title":"Contributor info","text":"<p>Open Banking Connector is an open-source project and welcomes contributions. Please contact us for more information about contributing to this project.</p> <p>See the following sections for contributor guidance on:</p> <ul> <li>documentation</li> </ul>"},{"location":"contributor-info/#environment-selection","title":"Environment selection","text":"<p>Open Banking Connector can be run using different environments such as development, staging and production. In fact, its behaviour is only actually sensitive to whether it is run in the development environment.</p> <p>By default, Open Banking Connector uses the production environment.</p> <p>In the development environment, logging, error handling and configuration defaults etc are modified to suit the needs of developing and testing Open Banking Connector. The development environment should not be used in production.</p> <p>Environment selection is not configured by Open Banking Connector settings but normally via the Microsoft <code>DOTNET_ENVIRONMENT</code> or <code>ASPNETCORE_ENVIRONMENT</code> environment variables.</p> <p>Here is an example of how to run the web app container using environment variables to (a) use the development environment and (b) set the DB provider to <code>\"Sqlite\"</code>:</p>"},{"location":"contributor-info/dev-environment/install-ob-root-cert/","title":"Install Open Banking UK root certificate","text":"<p>When running Open Banking Connector as a .NET application from source code, an Open Banking UK root certificate needs to be installed to check remote certs from banks when creating TLS connections to bank sandboxes.</p>"},{"location":"contributor-info/dev-environment/install-ob-root-cert/#obtain-the-root-certificate","title":"Obtain the root certificate","text":"<p>The UK Open Baking Sandbox root certificate can be obtained here.</p> <p>Currently only the Open Banking UK root certificate (and not the issuing certificate) needs to be installed.</p>"},{"location":"contributor-info/dev-environment/install-ob-root-cert/#install-the-root-certificate","title":"Install the root certificate","text":"<p>On Windows, open the certificate manager (certlm.msc) and right-click \"Trusted Root Certification Authorities / Certificates\" and choose to import the certificate.</p> <p>On macOS (Big Sur), double-click the cert to add to the System Keychain and right-click to enable \"Always Trust\".</p>"},{"location":"contributor-info/dev-environment/use-secret-manager/","title":"Use Microsoft's secret manager","text":"<p>When running Open Banking Connector as a .NET application from source code, and when in the development environment, Microsoft's secret manager can be used to provide configuration/secrets.</p> <p>To use the secret manager, you will need a <code>secrets.json</code> file in the appropriate directory (if you do not have one already). The Microsoft documentation here gives the path for this directory. Please note that the UserSecretsId for the app is <code>aa921213-9461-4f9e-8fec-153624ec67ad</code> as given here.</p> <p>You can then add key-value pairs to the <code>secrets.json</code> file to supply configuration to Open Banking Connector.</p> <p>Here is an example of what such a file might look like after configuring a software statement profile, transport certificate profile and signing certificate profile:</p> <pre><code>{\n\"OpenBankingConnector:TransportCertificateProfiles:New2:CertificateDnWithStringDottedDecimalAttributeValues\": \"CN=abc,2.5.4.97=abc,O=abc,C=GB\",\n\"OpenBankingConnector:TransportCertificateProfiles:New2:CertificateDnWithHexDottedDecimalAttributeValues\": \"CN=abc,2.5.4.97=#123,O=abc,C=GB\",\n\"OpenBankingConnector:TransportCertificateProfiles:New2:Certificate\": \"-----BEGIN CERTIFICATE-----\\nabc\\n-----END CERTIFICATE-----\\n\",\n\"OpenBankingConnector:TransportCertificateProfiles:New2:AssociatedKey\": \"-----BEGIN PRIVATE KEY-----\\nabc\\n-----END PRIVATE KEY-----\\n\",\n\"OpenBankingConnector:SoftwareStatementProfiles:All:TransportCertificateProfileId\": \"New2\",\n\"OpenBankingConnector:SoftwareStatementProfiles:All:SoftwareStatement\": \"a.b.c\",\n\"OpenBankingConnector:SoftwareStatementProfiles:All:SigningCertificateProfileId\": \"New2\",\n\"OpenBankingConnector:SoftwareStatementProfiles:All:DefaultFragmentRedirectUrl\": \"https://example.com/auth/fragment-redirect\",\n\"OpenBankingConnector:SigningCertificateProfiles:New2:AssociatedKeyId\": \"abc\",\n\"OpenBankingConnector:SigningCertificateProfiles:New2:AssociatedKey\": \"-----BEGIN PRIVATE KEY-----\\nabc\\n-----END PRIVATE KEY-----\\n\"\n}\n</code></pre> <p>Important: Some settings values are very sensitive, for example keys, and should be carefully and securely stored and managed.  They should never be stored in-repo, for example in additional or modified <code>appsettings.json</code> files, due to the risk of disclosure. The secret manager is designed to store secrets out-of-repo during code development and testing where other configuration providers may not be available.</p>"},{"location":"contributor-info/documentation/","title":"Documentation","text":"<p>This section provides contributor information both on creating documentation and publishing it to the docs website.  </p> <p>Documentation is written in Markdown and stored in the repo <code>./docs</code> folder.</p> <p>The documentation is available publicly:</p> <ul> <li>on the GitHub repo (reflects latest commits)</li> <li>on the docs website (reflects capture of documentation most recently pushed to <code>gh_pages</code> branch)</li> </ul> <p>We here provide guidance for</p> <ul> <li>updating documentation in the <code>./docs</code> folder</li> <li>deploying documentation from the <code>./docs</code> folder to the docs website.  </li> </ul>"},{"location":"contributor-info/documentation/deploy-documentation/","title":"Deploy documentation","text":"<p>Here are the steps required to:</p> <ul> <li> <p>prepare for deployment </p> </li> <li> <p>deploy documentation to website</p> </li> </ul>"},{"location":"contributor-info/documentation/deploy-documentation/#pre-requisites","title":"Pre-requisites","text":"<p>To publish documentation to the website, you will need to have permission to push to the <code>gh-pages</code> branch of the repo.</p> <p>You will require Python 3 and Material for MkDocs (mkdocs-material).</p> <p>Assuming you have installed Python, you can install Material for MkDocs as follows:</p> <pre><code>pip install mkdocs-material\npip install mkdocs-git-revision-date-localized-plugin \npip install mkdocs-render-swagger-plugin\n</code></pre>"},{"location":"contributor-info/documentation/deploy-documentation/#prepare-for-deployment","title":"Prepare for deployment","text":""},{"location":"contributor-info/documentation/deploy-documentation/#preview-website","title":"Preview website","text":"<p>To deploy the website locally for inspection and testing, please <code>cd</code> to the repo root and run the following command: <pre><code>mkdocs serve\n</code></pre> This will return the URL you can use to preview the website. Commit and push any corrections or updates required.</p>"},{"location":"contributor-info/documentation/deploy-documentation/#convert-code-links-to-absolute-paths-temporary-change-do-not-commit","title":"Convert code links to absolute paths (temporary change - do not commit)","text":"<p>Relative paths are used for links to other repo files in the docs. However, before running <code>mkdocs</code> to generate the website, relative links that go outside the <code>docs</code> folder must be converted to absolute links.</p> <p>If no version tag is available for absolute links, create and push a git tag with a new version number for the docs: <pre><code>git tag \"docs_v1.0\"\ngit push publicRemote docs_v1.0\n</code></pre> So, for example, <pre><code>(../../../../src/..../BankConfigurationMethods.cs#39)\n</code></pre> must be converted to</p> <pre><code>(https://github.com/finlabsuk/open-banking-connector/blob/tag/src/..../BankConfigurationMethods.cs#39).\n</code></pre> <p>Here is a regular expression search and replace that may be used to do this in (we used this in Visual Studio Code.</p> <p>Search: <pre><code>\\(\\.\\.\\/[\\.\\/]*?src\n</code></pre></p> <p>Replace (with correct tag): <pre><code>(https://github.com/finlabsuk/open-banking-connector/blob/tag/src\n</code></pre></p> <p>Note: Please do not commit these changes to links. They can be discarded once the website is deployed.</p>"},{"location":"contributor-info/documentation/deploy-documentation/#deploy-website","title":"Deploy website","text":"<p>Assuming you have permissions to push to the repo <code>gh-pages</code> branch, you can update the public website on GitHub Pages using: <pre><code>mkdocs gh-deploy -m \"Message\" -r publicRemote --ignore-version # adjust commit message and remote as required \n</code></pre></p> <p>N.B. The <code>--ignore-version</code> flag is used to solve the problem of Mkdocs confusing the tag version with the Mkdocs version which stops the website from being deployed.</p>"},{"location":"contributor-info/documentation/update-documentation/","title":"Update documentation","text":"<p>To update documentation:</p> <ul> <li>edit files in the repo <code>./docs</code> folder</li> <li>update the <code>nav</code> section in the repo <code>./mkdocs.yml</code> file to specify sections and links.</li> </ul> <p>In the docs, please ensure links to other repo files are relative links. For example: <pre><code>[Page](./page.md)\n</code></pre></p> <p>Once docs are updated, you can deploy the documentation.</p>"},{"location":"get-started/","title":"Get started","text":"<p>Here we will describe how to get Open Banking Connector up and running.</p> <p>The main steps are:</p> <ol> <li>set up configuration and secrets</li> <li>set up bank redirect handling</li> <li>run the Open Banking Connector Docker image</li> </ol> <p>You can then use Open Banking Connector APIs to:</p> <ol> <li>set up a bank</li> <li>connect to the bank using APIs such as the Account and Transaction API</li> </ol>"},{"location":"get-started/#set-up-configuration-and-secrets","title":"Set up configuration and secrets","text":"<p>Configuration and secrets are read-only data supplied to Open Banking Connector that configure its behaviour and supply sensitive information such as transport and signing keys.</p> <p>They can be supplied via environment variables, command line options, or via a supported cloud secrets provider (or any of these in combination). You may wish to decouple your configuration sources from Open Banking Connector as an application by combining static configuration environment variables with dynamically-generated secrets environment variables.</p> <p>In this section, we will set up minimal configuration and secrets using environment variables. (Note that Open Banking Connector uses the .NET convention of replacing \":\" with \"__\" when environment variables are used. So the configuration setting <code>OpenBankingConnector:Database:Provider</code> is set by the environment variable <code>OpenBankingConnector__Database__Provider</code>.)</p>"},{"location":"get-started/#1-set-up-software-statement-transport-and-signing-keys","title":"1. Set up software statement, transport and signing keys","text":"<p>Software statements (SSAs), transport keys and certs, and signing keys are supplied (alongside related data) to Open Banking Connector by means of:</p> <ul> <li>software statement profiles</li> <li>transport certificate profiles</li> <li>signing certificate profiles</li> </ul> <p>Below are environment variables to set up of one of each of these (the minimum necessary to create a bank registration). To use these, you will need to generate an SSA, a OBWAC transport key with signed cert, and an OBSeal signing key with signed cert using the UK Open Banking Directory and following the instructions there.</p> <pre><code># Software statement profile with ID \"All\"\nOpenBankingConnector__SoftwareStatementProfiles__All__TransportCertificateProfileId=All # instruction to use transport certificate profile with ID \"All\"\nOpenBankingConnector__SoftwareStatementProfiles__All__SoftwareStatement=a.b.c # substitute your software statement assertion (SSA)\nOpenBankingConnector__SoftwareStatementProfiles__All__SigningCertificateProfileId=All # instruction to use signing certificate profile with ID \"All\"\nOpenBankingConnector__SoftwareStatementProfiles__All__DefaultFragmentRedirectUrl=https://example.com/auth/fragment-redirect # substitute your default redirect URL (must match one in your included in your SSA)\n\n# Transport certificate profile with ID \"All\"\nOpenBankingConnector__TransportCertificateProfiles__All__CertificateDnWithHexDottedDecimalAttributeValues=\"CN=00158,2.5.4.97=#1,O=MyCompany,C=GB\" # substitute your transport certificate DN\nOpenBankingConnector__TransportCertificateProfiles__All__Certificate=\"-----BEGIN CERTIFICATE-----\\nline1\\nline2\\n-----END CERTIFICATE-----\\n\" # substitute your OBWAC transport certificate\nOpenBankingConnector__TransportCertificateProfiles__All__AssociatedKey=\"-----BEGIN PRIVATE KEY-----\\nline1\\nline2\\n-----END PRIVATE KEY-----\\n\" # substitute your transport key\n\n# Signing certificate profile with ID \"All\"\nOpenBankingConnector__SigningCertificateProfiles__All__AssociatedKeyId=xyz # substitute your signing key ID (kid) to allow certificate lookup (obtain from UK Open Banking Directory)\nOpenBankingConnector__SigningCertificateProfiles__All__AssociatedKey=\"-----BEGIN PRIVATE KEY-----\\nline1\\nline2\\n-----END PRIVATE KEY-----\\n\" # substitute your signing key (that associated with OBSeal signing certificate)\n</code></pre>"},{"location":"get-started/#2-set-up-database-connection","title":"2. Set up database connection","text":"<p>Database settings are described here.</p> <p>Open Banking Connector supports PostgreSQL for production usage.</p> <p>Here are environment variables to configure use of PostgreSQL including providing a connection string.</p> <pre><code>OpenBankingConnector__Database__Provider=PostgreSql # strictly unnecessary as this is the default\nOpenBankingConnector__Database__EnsureDatabaseCreated=true # suggest temporarily true to allow Open Banking Connector to create database on first use\nOpenBankingConnector__Database__ConnectionStrings__PostgreSql=\"Host=localhost;Database=test;Username=postgres\" # substitute your connection string without password\nOpenBankingConnector__Database__PasswordSettingNames__PostgreSql=OpenBankingConnector:Custom:PostgreSqlPassword # substitute name of environment variable providing database password\nOpenBankingConnector__Custom__PostgreSqlPassword=placeholder # substitute name/value with database password environment variable\n</code></pre>"},{"location":"get-started/#3-provide-bank-profile-information","title":"3. Provide bank profile information","text":"<p>Almost all bank profile information is supplied via source code.</p> <p>However, some key information such as org IDs and URLs is only available to those registered with the UK Open Banking Directory. This information needs to be provided via configuration to fill gaps in the bank profile definitions.</p> <p>When using a bank profile for the first time, if any required information from configuration is not available, Open Banking Connector will provide an error with details.</p> <p>For reference, we list here currently required configuration for various bank groups. Important: You only need to provide information that relates to bank profiles you want to use.</p> <pre><code># Bank group: NatWest (only affects sandbox bank profiles)\nOpenBankingConnector__BankProfiles__NatWest__RoyalBankOfScotlandSandbox__PaymentInitiationApi__BaseUrl=xx # substitute value\nOpenBankingConnector__BankProfiles__NatWest__RoyalBankOfScotlandSandbox__IssuerUrl=xx # substitute value\nOpenBankingConnector__BankProfiles__NatWest__RoyalBankOfScotlandSandbox__AccountAndTransactionApi__BaseUrl=xx # substitute value\nOpenBankingConnector__BankProfiles__NatWest__NatWestSandbox__PaymentInitiationApi__BaseUrl=xx # substitute value\nOpenBankingConnector__BankProfiles__NatWest__NatWestSandbox__IssuerUrl=xx # substitute value\nOpenBankingConnector__BankProfiles__NatWest__NatWestSandbox__AccountAndTransactionApi__BaseUrl=xx # substitute value\n\n# Bank group: Monzo (only affects sandbox bank profiles)\nOpenBankingConnector__BankProfiles__Monzo__Monzo__PaymentInitiationApi__ApiVersion=VersionZZ # substitute value\nOpenBankingConnector__BankProfiles__Monzo__Monzo__FinancialId=yy # substitute value\n\n# Bank group: Lloyds\nOpenBankingConnector__BankProfiles__Lloyds__MbnaPersonal__FinancialId=yy # substitute value\nOpenBankingConnector__BankProfiles__Lloyds__LloydsPersonal__FinancialId=yy # substitute value\nOpenBankingConnector__BankProfiles__Lloyds__BankOfScotlandPersonal__FinancialId=yy # substitute value\n\n# Bank group: HSBC\nOpenBankingConnector__BankProfiles__Hsbc__Default__FinancialId=yy # substitute value\nOpenBankingConnector__BankProfiles__Hsbc__Default__AccountAndTransactionApi__ApiVersion=VersionZZ # substitute value\n\n# Bank group: Barclays\nOpenBankingConnector__BankProfiles__Barclays__Default__FinancialId=yy # substitute value\n</code></pre>"},{"location":"get-started/#set-up-bank-redirect-handling","title":"Set up bank redirect handling","text":"<p>For production, you will also need to setup a redirect endpoint (e.g. simple web page) to handle the bank redirects that follow end-user auth. Your redirect endpoint needs to match one of the redirect URLs included in in your SSA and you will probably want to customise the branding and message shown.</p> <p>Open Banking Connector is designed as an internal API and its endpoints should be secured (see here) and definitely not exposed to the internet in any way. This is very important as endpoints provide access to Open Banking APIs.</p> <p>To give an idea of what is required, Open Banking Connector does provide an example redirect endpoint at <code>/auth/fragment-redirect</code> which is a simple web page with \"Open Banking Connector\" branding.</p>"},{"location":"get-started/#run-the-docker-image","title":"Run the Docker image","text":"<p>Open Banking Connector Docker images (including the latest) are available here. The Docker images are produced from the Dockerfile in the source code repo. Git tags are used so you can see the exact source code used to create each Docker image.</p> <p>For test purposes, you can pull and run a desired Docker image using a command such as: <pre><code># Substitute env file location and image version in this command\ndocker run -dt --env-file \"&lt;path&gt;/docker.env\" -p 50000:80 --name \"open_banking_connector\" ghcr.io/finlabsuk/open-banking-connector-web-app:x.y.z\n</code></pre> where an env file is used to supply environment variables.</p>"}]}